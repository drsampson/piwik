<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE project [
  <!ENTITY time  SYSTEM "../modules/time.xml">
  <!ENTITY checkForErrors SYSTEM "../modules/errors.xml">
  <!ENTITY verifyLinksAndImages SYSTEM "../modules/common_pages.xml">
  <!ENTITY raquo "&#187;">
]>

<project name="Smoke test level0 - deploy test" basedir="."	default="webtest">
		&time;
		<target name="webtest">
			<webtest name="install index">
	            <steps>
	            
	                <invoke description="get account index" url="/" />
	                
	                <!-- 1. welcome -->
	                
	                <verifyTitle description="check the title is parsed correctly" text="Piwik &raquo; Installation" />
	                <verifytext description="check page text" text="Piwik" />
	                <verifytext description="check page text" text="Welcome!" />
	                <verifytext description="check page text" text="This process is split up into 8 easy steps and will take around 5 minutes" />
	            	&checkForErrors;
	            	&verifyLinksAndImages;
	            
	            	<clickLink description="click Next" label="Next &raquo;" />
	            	
	            	<!-- 2. systemCheck -->
	            	
	            	<verifyTitle description="check the title is parsed correctly" text="Piwik &raquo; Installation" />
					<verifytext description="check page text" text="Piwik" />
	                <verifytext description="check page text" text="System check" />
	                <verifytext description="check page text" text="Optional" />	            	
	            	
	            	<not description="check if system check passed">
	            		<verifyXPath description="looking for error image" xpath="//img[@src='themes/default/images/error.png']"/>
	            	</not>
	            	
	            	<verifyXPath description="looking for ok image" xpath="//img[@src='themes/default/images/ok.png']"/>
	            	
	            	<clickLink description="click Next" label="Next &raquo;" />
	            	
	            	<!-- 3. databaseSetup -->

	            	<verifyTitle description="check the title is parsed correctly" text="Piwik &raquo; Installation" />
					<verifytext description="check page text" text="Piwik" />
	                <verifytext description="check page text" text="Mysql database setup" />
	            	
	            	
	            	
	            </steps>
	        </webtest>
	</target>
</project>
